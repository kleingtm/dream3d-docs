 EMsoftEBSDmaster {#emsoftebsdmaster}
=============

## Group (Subgroup) ##
EMsoftToolbox (EMsoftToolbox)

## Description ##
This EMsoftEBSDmaster filter asks the user for all the parameters needed by the EMEBSDmaster program and subsequently carries out the dynamical scattering simulation to compute the Master Patterns (both Northern and Southern hemispheres in modified Lambert projection form).  For the mathematical details we refer the interested user to the following paper:
P.G. Callahan and M. De Graef, *"Dynamical EBSD Patterns Part I: Pattern Simulations,"* Microscopy and Microanalysis, **19**, pp. 1255-1265 (2013).  *Please note that this filter can take a very long time to run, especially for structures with large unit cells...*

## Parameters ##
| Name | Type | Default Value | Description |
|------|------|------|------|
| dmin | double | 0.05 | Smallest d-spacing (nm) |
| npx  | int    | 500  | Number of pixels along positive x-axis|
|BetheParameters | double | 5, 8, 50 | Bethe Cutoff parameters (see comment 1)|
| platid | int | 1 | CPU platform ID |
| nthreads| int | 2 | Number of OpenMP threads (comment 1) |
| writeJSON | bool | false | write a *.json file with the input parameters? |
| JSONfile | string | "undefined" | Name of *.json file |
|writeEMsoftH5 | bool | false | write an EMsoft-style HDF5 file?|
| DataName | string | "undefined" | Name of EMsoft h5 file |

*Comment 1:* The Bethe parameters are truncation parameters used to speed up the Bloch wave computations.  The default values are reasonable for most SEM-based diffraction simulations.  For eaqch diffracted beam, the ratio between the product of electron wave length x potential Fourier coefficient and the excitation error is compared to the three truncation constants; if the ratio is smaller than the first number, then the reflection will be considered as a strong beam; between first and second value indicates a weak beam, which is taken into account via perturbation analysis; large than the second value is not taken into account in the current diffraction condition, and larger than the third number is never taken into account.  We refer the user to the following paper for more in-depth analysis:
A. Wang and M. De Graef. *"Modeling dynamical electron scattering with Bethe potentials and the scattering matrix"*. Ultramicroscopy, **160**, 35-43 (2015).

*General Comment:* 

## Required Geometry ##

Not Applicable

## Required Objects ##
(generated by the EMsoftMCOpenCL filter)

| Kind | Default Name | Type | Component Dimensions | Description |
|------|--------------|-------------|---------|----------------|
| **Data Container** | EMsoftDataContainer | N/A | N/A |  **Data Container** name **EMsoftDataContainer**|
| **Attribute Matrix** | EMsoftAttributeMatrix | Generic | N/A |  **Cell Attribute Matrix** name |
| **Generic Attribute Array** | (accum_z; user defined) | int32_t | (1 tuple; 4D array) |  **Generic Attribute Matrix** name |

## Created Objects ##

| Kind | Default Name | Type | Component Dimensions | Description |
|------|--------------|-------------|---------|----------------|
| **Data Container** | EMsoftDataContainer | N/A | N/A |  **Data Container** name **EMsoftDataContainer**|
| **Attribute Matrix** | EMsoftAttributeMatrix | Generic | N/A |  **Cell Attribute Matrix** name |
| **Generic Attribute Array** | (mLPNH; user defined) | float | (1 tuple; 4D array) |  **Generic Attribute Matrix** name |
| **Generic Attribute Array** | (mLPSH; user defined) | float | (1 tuple; 4D array) |  **Generic Attribute Matrix** name |

## License & Copyright ##

Please see the description file distributed with this plugin.

## Funding Acknowledgment ##

This filter was developed with financial support from contract AFRL FA8650-10-D-5210, Task Order 0034.

## DREAM3D Mailing Lists ##

If you need more help with a filter, please consider asking your question on the DREAM3D Users mailing list:
https://groups.google.com/forum/?hl=en#!forum/dream3d-users

